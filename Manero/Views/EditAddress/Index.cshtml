@model Manero.Models.ViewModels.EditAddressVM

@{

    ViewData["Title"] = "Change address";

    var header = !Model.Id.HasValue ? "Add a new address" : "Change address";
    var url = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12548.152136366463!2d18.009130612739614!3d59.34768425265853!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x465f9d86c5590a35%3A0xac5dd727a529fe56!2sEC%20Utbildning%20AB!5e0!3m2!1sen!2sse!4v1666604021604!5m2!1sen!2sse";

}

<section class="container">

    <style>

        .size-64px {
            height: 64px;
            width: 64px;
        }

        input {
            height: 42px;
            border-radius: 50px;
            padding-left: 22px;
            border: 1px solid gray;
        }

        ul {
            padding: 0;
            list-style: unset;
        }

    </style>

    <div class="d-flex flex-row mt-4">
        <a asp-controller="myaddresses" class="btn rounded-circle border-none d-flex p-0 size-64px"><i class="m-auto fa-solid fa-chevron-left"></i></a>
        <h1 class="text-center w-100 m-auto">@header</h1>
    </div>

    <iframe class="w-100 h-100 my-4" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src="@url"></iframe>
    <div asp-validation-summary="All" class="text-danger p-0"></div>
    <form class="d-flex flex-column" asp-controller="EditAddress">

        <label asp-for="AdressName"></label>
        <input type="text" asp-for="AdressName" class="mt-1">
        <label asp-for="StreetName" class="mt-4"></label>
        <input type="text" asp-for="StreetName" class="mt-1">
        <label asp-for="PostalCode" class="mt-4"></label>
        <input type="text" asp-for="PostalCode" class="mt-1">
        <label asp-for="City" class="mt-4"></label>
        <input type="text" asp-for="City" class="mt-1 mb-1">

@*         <input type="checkbox" id="autoLocationToggle" checked/>
        <p id="autoLocationOutput"></p> *@

        <button type="submit" class="btn button-theme w-100 mt-5 mb-3">Save address</button>

    </form>

    @if(Model.Id.HasValue)
    {
        <div class="d-flex flex-row-reverse">
            <a asp-action="remove" asp-route-id="@Model.Id">Remove</a>
        </div>
    }

    <script>

        let autoLocationOutput = document.getElementById("autoLocationOutput");
        let autoLocationToggle = document.getElementById("autoLocationToggle");
        
        let streetName = document.getElementById("@nameof(Model.StreetName)");
        let postalCode = document.getElementById("@nameof(Model.PostalCode)");
        let city = document.getElementById("@nameof(Model.City)");

        // function refreshDisabled() {
        //     streetName.toggleAttribute("disabled", autoLocationToggle.checked);
        //     postalCode.toggleAttribute("disabled", autoLocationToggle.checked);
        //     city.toggleAttribute("disabled", autoLocationToggle.checked);
        // }

        // refreshDisabled();
        // autoLocationToggle.addEventListener("change", () => {
            
        //     console.log("sak");
        //     refreshDisabled();

        // });

    </script>

</section>